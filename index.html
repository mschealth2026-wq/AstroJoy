<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AstroVision Pro - Aspect Quality</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0f172a; color: white; font-family: 'Inter', sans-serif; }
        .house-card { background: #1e293b; border: 1px solid #334155; border-radius: 20px; }
        .tag { font-size: 9px; font-weight: bold; padding: 2px 6px; border-radius: 4px; text-transform: uppercase; }
        .aspect-good { background: #064e3b; color: #34d399; border: 1px solid #059669; }
        .aspect-bad { background: #450a0a; color: #f87171; border: 1px solid #dc2626; }
        .planet-row { background: #0f172a; border-radius: 12px; padding: 10px; margin-bottom: 8px; border: 1px solid #334155; }
        .strength-bar { height: 4px; border-radius: 2px; background: #334155; margin-top: 6px; overflow: hidden; }
        .strength-fill { height: 100%; transition: width 0.5s; }
    </style>
</head>
<body class="p-6 md:p-10">
    <div class="max-w-7xl mx-auto">
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-black text-sky-400 mb-2">AstroVision Pro</h1>
            <p class="text-slate-400 uppercase tracking-widest text-xs font-bold">Planetary Aspect Quality Analysis</p>
        </header>

        <div id="chartDisplay" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
    </div>

    <script>
        const zodiac = [
            { name: "Aries", lord: "Mar" }, { name: "Taurus", lord: "Ven" },
            { name: "Gemini", lord: "Mer" }, { name: "Cancer", lord: "Mon" },
            { name: "Leo", lord: "Sun" }, { name: "Virgo", lord: "Mer" },
            { name: "Libra", lord: "Ven" }, { name: "Scorpio", lord: "Mar" },
            { name: "Sagittarius", lord: "Jup" }, { name: "Capricorn", lord: "Sat" },
            { name: "Aquarius", lord: "Sat" }, { name: "Pisces", lord: "Jup" }
        ];

        const planetData = [
            { p: "Sun", sign: "Taurus", deg: 15.11, house: 4, nature: "Malefic" },
            { p: "Mon", sign: "Capricorn", deg: 0.26, house: 12, nature: "Benefic" },
            { p: "Mar", sign: "Taurus", deg: 16.08, house: 4, nature: "Malefic" },
            { p: "Mer", sign: "Aries", deg: 23.50, house: 3, nature: "Benefic" },
            { p: "Jup", sign: "Scorpio", deg: 12.05, house: 10, nature: "Benefic" },
            { p: "Ven", sign: "Gemini", deg: 29.41, house: 5, nature: "Benefic" },
            { p: "Sat", sign: "Libra", deg: 4.54, house: 9, nature: "Malefic" },
            { p: "Rah", sign: "Gemini", deg: 2.18, house: 5, nature: "Malefic" },
            { p: "Ket", sign: "Sagittarius", deg: 2.18, house: 11, nature: "Malefic" }
        ];

        function getStrength(deg) {
            if (deg >= 12 && deg <= 18) return { l: "Youth (100%)", w: "100%", c: "#10b981" };
            return { l: "Partial Strength", w: "40%", c: "#6366f1" };
        }

        function calculateAspects(houseNum, houseLord) {
            let aspects = [];
            planetData.forEach(p => {
                let diff = (houseNum - p.house + 12) % 12;
                if (diff === 0) diff = 12;
                
                let isAspecting = false;
                if (diff === 7) isAspecting = true;
                if (p.p === "Mar" && (diff === 4 || diff === 8)) isAspecting = true;
                if (["Jup", "Rah", "Ket"].includes(p.p) && (diff === 5 || diff === 9)) isAspecting = true;
                if (p.p === "Sat" && (diff === 3 || diff === 10)) isAspecting = true;

                if (isAspecting) {
                    // Jupiter aspect is always good. Others depend on nature.
                    let quality = (p.p === "Jup" || p.nature === "Benefic") ? "Good" : "Challenging";
                    // If a malefic aspects its own house, it becomes Good
                    if (p.nature === "Malefic" && houseLord === p.p) quality = "Good (Protective)";
                    
                    aspects.push({ name: p.p, quality: quality });
                }
            });
            return aspects;
        }

        function render() {
            const ascName = "Aquarius";
            const startIdx = zodiac.findIndex(z => z.name === ascName);
            const container = document.getElementById('chartDisplay');

            for (let i = 0; i < 12; i++) {
                const houseNum = i + 1;
                const sign = zodiac[(startIdx + i) % 12];
                const housePlanets = planetData.filter(p => p.house === houseNum);
                const aspects = calculateAspects(houseNum, sign.lord);

                container.innerHTML += `
                    <div class="house-card p-5">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-black text-xl text-sky-400">H${houseNum}</h3>
                            <span class="text-[9px] font-bold text-slate-500 uppercase">${sign.name}</span>
                        </div>

                        <div class="mb-4 space-y-2">
                            <h4 class="text-[8px] text-slate-500 font-bold uppercase tracking-widest">Planets Inside</h4>
                            ${housePlanets.map(p => `
                                <div class="planet-row">
                                    <div class="flex justify-between items-center text-xs">
                                        <span class="font-bold">${p.p}</span>
                                        <span>${p.deg}¬∞</span>
                                    </div>
                                    <div class="strength-bar"><div class="strength-fill" style="width:${getStrength(p.deg).w}; background:${getStrength(p.deg).c}"></div></div>
                                </div>
                            `).join('') || '<p class="text-[10px] text-slate-700 italic">Empty</p>'}
                        </div>

                        <div>
                            <h4 class="text-[8px] text-slate-500 font-bold uppercase tracking-widest mb-2">Aspect Impacts</h4>
                            <div class="space-y-2">
                                ${aspects.map(a => `
                                    <div class="flex justify-between items-center">
                                        <span class="text-[10px] font-medium">üëÅÔ∏è ${a.name}</span>
                                        <span class="tag ${a.quality === 'Good' || a.quality.includes('Good') ? 'aspect-good' : 'aspect-bad'}">${a.quality}</span>
                                    </div>
                                `).join('') || '<p class="text-[10px] text-slate-700 italic">No aspects</p>'}
                            </div>
                        </div>
                    </div>`;
            }
        }
        render();
    </script>
</body>
</html>
